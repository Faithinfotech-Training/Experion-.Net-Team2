
CREATE DATABASE ClinicManagementDB;
USE ClinicManagementDB;

CREATE TABLE ROLES(
ROLEID INT PRIMARY KEY IDENTITY(1,1),
ROLENAME NVARCHAR(50) NOT NULL);



CREATE TABLE STAFF(
STAFFID INT PRIMARY KEY IDENTITY(1,1),
NAME NVARCHAR(50) NOT NULL,
GENDER NVARCHAR(15) NOT NULL,
DATE_OF_BIRTH DATE NOT NULL,
ADDRESS NVARCHAR(50) NOT NULL,
DATE_OF_JOIN DATE NOT NULL,
MOBILE NVARCHAR(15),
EXPERIENCE INT,
EMAIL NVARCHAR(50),
ISACTIVE BIT);



CREATE TABLE LOGIN(
LOGINID INT PRIMARY KEY,
USERNAME NVARCHAR(50) NOT NULL,
PASSWORD NVARCHAR(50) NOT NULL,
ROLEID INT NOT NULL,
CONSTRAINT ROLEIDFK FOREIGN KEY (ROLEID)
REFERENCES ROLES(ROLEID),
CONSTRAINT LOGINIDFK FOREIGN KEY (LOGINID)
REFERENCES STAFF(STAFFID));



CREATE TABLE DEPARTMENT_INFO(
DEPARTMENTID INT PRIMARY KEY IDENTITY(1,1),
DEPARTMENT_NAME NVARCHAR(50));





CREATE TABLE MedicineInfo(
Medicine_Id INT IDENTITY(1,1) PRIMARY KEY,
Medicine_Name NVARCHAR(30),
Medicine_Company NVARCHAR(30),
Medicine_Amount FLOAT,
Manufacturing_Date DATE,
Exp_Date DATE,
Medicine_Dosage INT,
isActive BIT);







CREATE TABLE DoctorInfo(
Doctor_Id INT IDENTITY(1,1) PRIMARY KEY,
Doctor_Name NVARCHAR(20),
isActive BIT,
Staff_Id INT  FOREIGN KEY
REFERENCES Staff (StaffId),
Department_Id INT  FOREIGN KEY
REFERENCES Department_Info (DepartmentId));


CREATE TABLE PatientInfo(Patient_Id INT PRIMARY KEY IDENTITY(1,1), Patient_Name NVARCHAR(30), Date_of_Birth DATE, Patient_Address NVARCHAR(30), Phone_Number NVARCHAR(12), isActive BIT);



--Clinic Table
CREATE TABLE ClinicInfo(Clinic_Id INT PRIMARY KEY IDENTITY(1,1), Clinic_Name NVARCHAR(30), Clinic_Address NVARCHAR(30), Clinic_Phone NVARCHAR(15));



--Bill Table
CREATE TABLE BillInfo(Bill_No INT PRIMARY KEY IDENTITY(1,1), Bill_Date DATE, Bill_Amount INT, Patient_Id INT, is_Active BIT, Clinic_id INT);



--Appointment Table
CREATE TABLE AppointmentInfo(Appointment_No INT PRIMARY KEY IDENTITY(1,1), Appointment_Date DATE, Appointment_Time TIME, Amount INT, Patient_Id INT, Doctor_Id INT, is_Active BIT);


CREATE TABLE PrescriptionInfo(
Prescription_Id INT IDENTITY(1,1) PRIMARY KEY,
Prescription_Date DATE,
Doctor_Notes NVARCHAR(100),
Test_Details NVARCHAR(100),
isActive BIT,
Medicine_Id INT CONSTRAINT fk_med1 FOREIGN KEY
REFERENCES MedicineInfo (Medicine_id),
Doctor_Id INT CONSTRAINT fk_doc FOREIGN KEY
REFERENCES DoctorInfo (Doctor_Id),
Patient_Id INT CONSTRAINT fk_pat FOREIGN KEY
REFERENCES PatientInfo (Patient_Id));

CREATE TABLE PrescriptionForMedicine(
Prescription_No INT IDENTITY(1,1) PRIMARY KEY,
Dosage_Freq INT,
No_of_Days INT,
isActive BIT,
Medicine_Id INT CONSTRAINT fk_med2 FOREIGN KEY
REFERENCES MedicineInfo (Medicine_id),
Prescription_Id INT CONSTRAINT fk_pres1 FOREIGN KEY
REFERENCES PrescriptionInfo (Prescription_id));

CREATE TABLE LabTechnician_Info(
	Lab_Technician_Id INT PRIMARY KEY IDENTITY(1,1),
	Lab_Technician_Name NVARCHAR(70),
	Department_Id INT FOREIGN KEY REFERENCES Department_Info(DepartmentId),
	Staff_Id INT FOREIGN KEY REFERENCES Staff(StaffId),
	IsActive BIT

)




CREATE TABLE LabReport(
	Report_No INT PRIMARY KEY IDENTITY(1,1),
	Report_Title NVARCHAR(70),
	Description NVARCHAR(100),
	Patient_Id INT FOREIGN KEY REFERENCES PatientInfo(Patient_Id),
	Doctor_Id INT FOREIGN KEY REFERENCES DoctorInfo(Doctor_Id),
	Clinic_Id INT FOREIGN KEY REFERENCES ClinicInfo(Clinic_Id),
	Lab_Technician_Id int FOREIGN KEY REFERENCES LabTechnician_Info(Lab_Technician_Id),
	IsActive BIT	
)

CREATE TABLE TestDetails_Info(
	Test_No INT PRIMARY KEY IDENTITY(1,1),
	Test_Name NVARCHAR(70),
	Test_DateTime DATETIME,
	Test_Unit NVARCHAR(70),
	Test_Amount MONEY,
	Test_Description NVARCHAR(70),
	IsActive BIT
)


CREATE TABLE Test_Info(
	Test_Id INT PRIMARY KEY IDENTITY(1,1),
	Test_No INT FOREIGN KEY REFERENCES TestDetails_Info(Test_No),
	Range NVARCHAR(50),
	DESCRIPTION NVARCHAR(100),
	Report_No INT FOREIGN KEY REFERENCES LabReport(Report_No),
	IsActive BIT
)